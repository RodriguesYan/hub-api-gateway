# Hub API Gateway - Environment Variables
# Copy this file to .env and update with your values
# Usage: cp env.example .env

# ============================================================================
# Server Configuration
# ============================================================================
HTTP_PORT=8080
ENVIRONMENT=development
SERVER_TIMEOUT=30s
SHUTDOWN_TIMEOUT=10s
GATEWAY_PORT=8080

# ============================================================================
# Redis Configuration (Token Caching)
# ============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ============================================================================
# Microservice Addresses (gRPC)
# ============================================================================
# User Service (Authentication)
USER_SERVICE_ADDRESS=localhost:50051

# Monolith Service (Orders, Positions, Market Data, Balance, Portfolio)
MONOLITH_SERVICE_ADDRESS=localhost:50060

# Individual service addresses (if using separate microservices)
ORDER_SERVICE_ADDRESS=localhost:50060
POSITION_SERVICE_ADDRESS=localhost:50060
MARKET_DATA_SERVICE_ADDRESS=localhost:50060

# ============================================================================
# Authentication Configuration
# ============================================================================
# IMPORTANT: This JWT secret MUST match the secret used by hub-user-service
# and HubInvestmentsServer monolith for token compatibility
JWT_SECRET=HubInv3stm3nts_S3cur3_JWT_K3y_2024_!@#$%^

# Token caching configuration
AUTH_CACHE_ENABLED=true
AUTH_CACHE_TTL=5m

# ============================================================================
# Logging Configuration
# ============================================================================
LOG_LEVEL=info
LOG_FORMAT=json

# ============================================================================
# Rate Limiting Configuration
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=1m

# ============================================================================
# Circuit Breaker Configuration
# ============================================================================
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=30s

# ============================================================================
# CORS Configuration
# ============================================================================
CORS_ENABLED=true
CORS_ALLOWED_ORIGINS=*

# ============================================================================
# Build Configuration (for Docker)
# ============================================================================
VERSION=dev
BUILD_DATE=unknown
GIT_COMMIT=unknown

# ============================================================================
# Notes
# ============================================================================
# 1. JWT_SECRET: Must be identical across all services for token validation
# 2. Service addresses: Use localhost for local development, container names for Docker
# 3. Redis: Required for token caching (improves performance by 50-100ms)
# 4. Rate limiting: Protects against abuse and DDoS attacks
# 5. Circuit breaker: Prevents cascading failures when services are down

